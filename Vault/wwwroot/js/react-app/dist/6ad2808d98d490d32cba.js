(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{47:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(49),i=n.n(r),s=n(5),c=n(3),l=n.n(c);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function p(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=p(this,m(t).call(this,e))).state={finished:!1,error:null,response:null,action:0},n}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,o.a.Component),n=t,(a=[{key:"componentDidMount",value:function(){this.onLoad()}},{key:"onUpdatePassword",value:function(){var e=this;this.setState({action:1}),setTimeout(function(){return e.currentPassword.focus()},100)}},{key:"onUpdateName",value:function(){var e=this;this.setState({action:2}),setTimeout(function(){return e.name.focus()},100)}},{key:"onGoBack",value:function(){this.setState({action:0})}},{key:"downloadShareXConfig",value:function(){if(this.state.response&&this.state.response.apiEnabled){var e=window.location.href.substr(0,window.location.href.lastIndexOf("/")+1),t='{"Name": "Vault", \n                "DestinationType": "ImageUploader, TextUploader, FileUploader",\n                "RequestURL": "'.concat(e,'share/upload",\n                "FileFormName": "file",\n                "Arguments": {"apikey": "').concat(this.state.response.apiKey,'"}, \n                "URL": "$json:path$"}');t=t.replace(/\s/g,"");var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download","sharex.".concat(this.state.response.name.toLowerCase(),".sxcu")),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}}},{key:"onLoad",value:function(){var e=this;this.setState({finished:!1,response:null,error:null,action:0}),fetch("process/settings",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){return e.json()}).then(function(t){t.success?e.setState({response:t,finished:!0}):e.setState({error:t.reason,finished:!0})},function(t){e.setState({error:t.message,finished:!0})})}},{key:"updatePassword",value:function(){var e=this;this.setState({finished:!1,response:null,error:null,action:0}),fetch("process/changepassword",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"currentPassword=".concat(encodeURIComponent(this.currentPassword.value),"&newPassword=").concat(encodeURIComponent(this.newPassword.value))}).then(function(e){return e.json()}).then(function(t){t.success?e.onLoad():e.setState({error:t.reason,finished:!0})},function(t){e.setState({error:t.message,finished:!0})})}},{key:"updateName",value:function(){var e=this;this.setState({finished:!1,response:null,error:null,action:0}),fetch("process/changename",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"name=".concat(encodeURIComponent(this.name.value))}).then(function(e){return e.json()}).then(function(t){t.success?e.onLoad():e.setState({error:t.reason,finished:!0})},function(t){e.setState({error:t.message,finished:!0})})}},{key:"disableAPI",value:function(){var e=this;this.setState({finished:!1,response:null,error:null,action:0}),fetch("process/toggleapi",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){return e.json()}).then(function(t){t.success?e.onLoad():e.setState({error:t.reason,finished:!0})},function(t){e.setState({error:t.message,finished:!0})})}},{key:"render",value:function(){var e=this,t=this.state.finished?null:o.a.createElement("center",null,o.a.createElement("div",{className:i.a.loader})),n=1===this.state.action&&!this.state.error&&this.state.finished?o.a.createElement("div",null,o.a.createElement("div",{className:i.a["warning-title"]},"Change Password"),o.a.createElement("div",{className:i.a["warning-message"]},o.a.createElement("p",null,"Please specify your current password:"),o.a.createElement("input",{type:"password",ref:function(t){e.currentPassword=t},onKeyDown:function(t){"Enter"===t.key&&e.newPassword.focus()}}),o.a.createElement("p",null,"Please specify a new password:"),o.a.createElement("input",{type:"password",ref:function(t){e.newPassword=t},onKeyDown:function(t){"Enter"===t.key&&e.updatePassword()}})),o.a.createElement("button",{className:i.a.button,onClick:this.updatePassword.bind(this)},"Change"),o.a.createElement("button",{className:i.a.button+" "+i.a.inverse,onClick:this.onGoBack.bind(this)},"Close")):null,a=2===this.state.action&&!this.state.error&&this.state.finished?o.a.createElement("div",null,o.a.createElement("div",{className:i.a["warning-title"]},"Change Name"),o.a.createElement("div",{className:i.a["warning-message"]},o.a.createElement("p",null,"Please specify a new name:"),o.a.createElement("input",{type:"text",placeholder:"John",ref:function(t){e.name=t},defaultValue:this.state.response.name,onKeyDown:function(t){"Enter"===t.key&&e.updateName()}})),o.a.createElement("button",{className:i.a.button,onClick:this.updateName.bind(this)},"Change"),o.a.createElement("button",{className:i.a.button+" "+i.a.inverse,onClick:this.onGoBack.bind(this)},"Close")):null,r=0===this.state.action&&!this.state.error&&this.state.finished?o.a.createElement("div",null,o.a.createElement("div",{className:i.a["warning-title"]},"Settings"),o.a.createElement("div",{className:i.a["warning-message"]},o.a.createElement("h3",null,"Name: "),o.a.createElement("span",null,this.state.response.name," ",o.a.createElement("img",{src:"images/pencil.svg",className:i.a["edit-button"],onClick:this.onUpdateName.bind(this)})),o.a.createElement("h3",null,"Password: "),o.a.createElement("span",null,"••••••••••  ",o.a.createElement("img",{src:"images/pencil.svg",className:i.a["edit-button"],onClick:this.onUpdatePassword.bind(this)})),o.a.createElement("h3",null,"Storage: "),o.a.createElement("span",null,this.state.response.storage),o.a.createElement("h3",null,"API: "),o.a.createElement("span",null,this.state.response.apiEnabled?o.a.createElement("div",null,o.a.createElement("p",null,"Your API is currently enabled, ",o.a.createElement("a",{onClick:this.disableAPI.bind(this)},"click here")," to disable API..."),o.a.createElement("div",{className:i.a["api-box"]},this.state.response.apiKey,o.a.createElement("img",{className:i.a.sharex,src:"images/sharex.svg",onClick:this.downloadShareXConfig.bind(this)}))):o.a.createElement("div",null,o.a.createElement("p",null,"Your API is currently disabled, ",o.a.createElement("a",{onClick:this.disableAPI.bind(this)},"click here")," to enable API..."))))):null,s=this.state.error&&this.state.finished?o.a.createElement("div",null,o.a.createElement("div",{className:i.a["warning-title"]},"Error!"),o.a.createElement("div",{className:i.a["warning-message"]},this.state.error)):null;return o.a.createElement("div",null,t,r,n,a,s)}}])&&f(n.prototype,a),r&&f(n,r),t}();function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function w(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=w(this,v(t).call(this,e))).state={started:!1,error:null,finished:!1},n}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,o.a.Component),n=t,(a=[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){return e.newName.focus()},100)}},{key:"close",value:function(){l.a.close()}},{key:"onClick",value:function(){var e=this;this.setState({started:!0}),fetch("process/newfolder",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"foldername=".concat(encodeURIComponent(this.newName.value))}).then(function(e){return e.json()}).then(function(t){t.success?l.a.close():e.setState({finished:!0,error:t.reason})},function(t){e.setState({finished:!0,error:t.message})})}},{key:"render",value:function(){var e=this,t=this.state.started&&!this.state.finished?o.a.createElement("center",null,o.a.createElement("div",{className:i.a.loader})):null,n=this.state.started||this.state.finished?null:o.a.createElement("div",null,o.a.createElement("div",{className:i.a["warning-title"]},"New Folder"),o.a.createElement("div",{className:i.a["warning-message"]},o.a.createElement("p",null,"Please specify a name for your new folder:"),o.a.createElement("input",{type:"text",ref:function(t){e.newName=t},onKeyDown:function(t){"Enter"===t.key&&e.onClick()}})),o.a.createElement("button",{className:i.a.button,onClick:this.onClick.bind(this)},"Create"),o.a.createElement("button",{className:i.a.button+" "+i.a.inverse,onClick:this.close.bind(this)},"Close")),a=this.state.finished&&this.state.error?o.a.createElement("div",null,o.a.createElement("div",{className:i.a["warning-title"]},"Error!"),o.a.createElement("div",{className:i.a["warning-message"]},this.state.error)):null;return o.a.createElement("div",null,t,n,a)}}])&&b(n.prototype,a),r&&b(n,r),t}();function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function C(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var O=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),C(this,P(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,o.a.Component),n=t,(a=[{key:"close",value:function(){swal.close()}},{key:"onClick",value:function(){window.location.href="process/logout"}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",{className:i.a["warning-title"]},"Logout"),o.a.createElement("div",{className:i.a["warning-message"]},o.a.createElement("p",null,"Performing this action will log you out of your account...")),o.a.createElement("button",{className:i.a.button,onClick:this.onClick.bind(this)},"Logout"),o.a.createElement("button",{className:i.a.button+" "+i.a.inverse,onClick:this.close.bind(this)},"Close"))}}])&&S(n.prototype,a),r&&S(n,r),t}();function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function T(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var U=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),T(this,x(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,o.a.Component),n=t,(a=[{key:"openSettings",value:function(){new s.a(o.a.createElement(h,null))}},{key:"openNewFolder",value:function(){new s.a(o.a.createElement(g,null))}},{key:"openLogout",value:function(){new s.a(o.a.createElement(O,null))}},{key:"openSearch",value:function(){this.props.openSearch()}},{key:"render",value:function(){return o.a.createElement("div",{className:i.a.topbar},o.a.createElement("span",{className:i.a.logo},o.a.createElement("img",{src:"images/ui/logo.svg"})),o.a.createElement("div",{className:i.a.btnSettings,onClick:this.openSettings.bind(this)}),o.a.createElement("div",{className:i.a.btnLogout,onClick:this.openLogout.bind(this)}),o.a.createElement("div",{className:i.a.btnHelp,onClick:this.openSearch.bind(this)}),o.a.createElement("div",{className:i.a.btnSort,onClick:this.openNewFolder.bind(this)}),o.a.createElement("div",{className:i.a.btnUpload}),o.a.createElement("div",{className:i.a["topbar-hider"]}))}}])&&_(n.prototype,a),r&&_(n,r),t}();t.default=U},5:function(e,t,n){"use strict";n.d(t,"a",function(){return r});n(0);var a=n(3),o=n.n(a);var r=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o()(t,{buttons:!1})}}}]);
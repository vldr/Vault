(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{37:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(49),i=n.n(a),s=n(5);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),l(this,f(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,r.a.Component),n=t,(o=[{key:"render",value:function(){if(!this.props.view)return null;var e=this.props.view,t="".concat(e.relativeURL).concat(e.url);return r.a.createElement("img",{src:t,className:i.a["overlay-preview"]})}}])&&u(n.prototype,o),a&&u(n,a),t}();function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,v(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,r.a.Component),n=t,(o=[{key:"render",value:function(){if(!this.props.view)return null;var e=this.props.view,t="".concat(e.relativeURL).concat(e.url);return r.a.createElement("audio",{controls:!0,src:t,className:i.a["overlay-preview"]})}}])&&h(n.prototype,o),a&&h(n,a),t}();function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function g(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var j=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,E(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(t,r.a.Component),n=t,(o=[{key:"render",value:function(){if(!this.props.view)return null;var e=this.props.view,t="".concat(e.relativeURL).concat(e.url);return r.a.createElement(r.a.Fragment,null,r.a.createElement("video",{className:i.a["overlay-preview"],controls:!0},r.a.createElement("source",{src:t,type:"video/mp4"}),r.a.createElement("source",{src:t,type:"video/ogg"})))}}])&&S(n.prototype,o),a&&S(n,a),t}();function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function C(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var N=r.a.lazy(function(){return Promise.all([n.e(9),n.e(14)]).then(n.bind(null,41))}),R=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=C(this,L(t).call(this,e))).state={isOpen:!1,isStandalone:!1,isLoading:!1,response:null},n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){this.props.shareId&&this.onOpenWithShareId(this.props.shareId)}},{key:"onClose",value:function(e){e.target.className===i.a.overlay&&this.close()}},{key:"onOpen",value:function(e){var t=this;this.props.closeSearch&&this.props.closeSearch(),this.setState({isOpen:!0,isLoading:!0}),fetch("process/viewer",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"fileid=".concat(encodeURIComponent(e))}).then(function(e){return e.json()}).then(function(e){e.success?t.setState({response:e,isLoading:!1}):(t.setState({isLoading:!1}),new s.a(r.a.createElement("p",null,e.reason)),t.close())},function(e){t.setState({isLoading:!1}),new s.a(r.a.createElement("p",null,e.message)),t.close()})}},{key:"onOpenWithShareId",value:function(e){var t=this;this.setState({isOpen:!0,isStandalone:!0,isLoading:!0}),fetch("viewer",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"shareid=".concat(encodeURIComponent(e))}).then(function(e){return e.json()}).then(function(e){e.success?t.setState({response:e,isLoading:!1}):(t.setState({isLoading:!1}),new s.a(r.a.createElement("p",null,e.reason)))},function(e){t.setState({isLoading:!1}),new s.a(r.a.createElement("p",null,e.message))})}},{key:"downloadFile",value:function(){var e=document.createElement("form");e.method="POST",e.action=this.state.response.relativeURL+this.state.response.url,document.body.appendChild(e),e.submit(),document.body.removeChild(e)}},{key:"close",value:function(){this.setState({isOpen:!1,response:null})}},{key:"open",value:function(){this.setState({isOpen:!0})}},{key:"render",value:function(){if(!this.state.isOpen)return null;var e=!this.state.isLoading&&this.state.response,t=r.a.createElement("center",null,r.a.createElement("div",{className:i.a.loader})),n=e?r.a.createElement("div",{className:i.a["overlay-topbar"]},r.a.createElement("img",{src:this.state.response.relativeURL+this.state.response.icon}),r.a.createElement("div",{className:i.a["overlay-topbar-text"]},this.state.response.name),r.a.createElement("div",{className:i.a["overlay-topbar-right"]},r.a.createElement("div",{className:i.a["btn-download-viewer"],onClick:this.downloadFile.bind(this)}),!this.state.isStandalone&&r.a.createElement("div",{className:i.a["btn-close-viewer"],onClick:this.close.bind(this)}))):null,o=r.a.createElement("div",{className:i.a["overlay-message"]},"No preview available");if(e)switch(this.state.response.action){case"1":o=r.a.createElement(y,{view:this.state.response});break;case"2":o=r.a.createElement(j,{view:this.state.response});break;case"3":o=r.a.createElement(N,{view:this.state.response});break;case"4":o=r.a.createElement(w,{view:this.state.response})}return r.a.createElement("div",{className:i.a.overlay,onClick:!this.state.isStandalone&&this.onClose.bind(this)},this.state.isLoading&&t,n,r.a.createElement(r.a.Suspense,{fallback:t},e&&o))}}])&&P(n.prototype,o),a&&P(n,a),t}();t.default=R},5:function(e,t,n){"use strict";n.d(t,"a",function(){return a});n(0);var o=n(3),r=n.n(o);var a=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r()(t,{buttons:!1})}}}]);